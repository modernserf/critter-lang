(function(){'use strict';function a(a){const b=a.length-a.trimLeft().length;if(0==b)return a;const c=a.split('\n').map((a)=>a.substr(b-1));return c.join('\n').trim()}const b=(a,b)=>({ok:!0,value:a,nextIndex:b}),c=(...a)=>({ok:!1,errors:a}),d=([a])=>a,e=(a,b,c,d)=>({match:a,index:d});class g{constructor(a){this._parseFn=a}parse(a,b=0){return this._parseFn(a,b)}parseAll(a){const b=l(this,h).map(d).parse(a,0);return b.ok?b.value:null}findMatches(a,b=0){for(const c=t(i,this.map(e)).map(u),d=[];;){const e=c.parse(a,b);if(!e.ok)return d;if(d.push(e.value),b===e.value.index)throw new Error('`findMatches` cannot be used on a parser that does not consume input');b=e.value.index}}map(a){return new g((c,d)=>{const e=this.parse(c,d);return e.ok?b(a(e.value,e,c,d),e.nextIndex):e})}mapError(a){return new g((b,d)=>{const e=this.parse(b,d);return e.ok?e:c(...a(e.errors,b,d))})}}class f extends g{constructor(a){super(a),this._memo=new Map}parse(a,b=0){if(this._memo.has(a)&&this._memo.get(a).has(b))return this._memo.get(a).get(b);this._memo.has(a)||this._memo.set(a,new Map);const c=this._parseFn(a,b);return this._memo.get(a).set(b,c),c}}const h=new g((a,d)=>d===a.length?b(null,d):c('expected_end_of_input',d)),i=new g((a,d)=>d>=a.length?c('unexpected_end_of_input',d):b(a[d],d+1)),j=(a)=>new f((d,e)=>e>=d.length?c('unexpected_end_of_input',e):a(d[e])?b(d[e],e+1):c('no_match',d[e],e)),k=(...a)=>new f((b,d)=>{for(const c of a){const a=c.parse(b,d);if(a.ok)return a}return c('no_alts',b[d],d)}),l=(...a)=>new f((c,d)=>{const e=[];for(const b of a){const a=b.parse(c,d);if(!a.ok)return a;d=a.nextIndex,e.push(a.value)}return b(e,d)}),m=(a)=>new f((c,d)=>{for(const e=[];;){const f=a.parse(c,d);if(!f.ok)return b(e,d);if(d===f.nextIndex)throw new Error('`all` cannot be used with a parser that does not consume input');d=f.nextIndex,e.push(f.value)}}),n=([a,b])=>[a].concat(b),o=(a)=>l(a,m(a)).map(n),q=((a)=>new g((c,d)=>b(a,d)))([]),r=(a)=>[a],p=(a)=>k(a.map(r),q),s=(a)=>new g((d,e)=>a.parse(d,e).ok?c('should_not_match',e):b(null,e)),t=(a,b)=>l(m(l(s(b),a).map(u)),b),u=([a,b])=>b,v=(...a)=>l(s(k(...a)),i).map(u),w=(a)=>a.join(''),x=(a)=>j((b)=>b===a),y=(a)=>l(...Array.from(a).map(x)).map(w),z=(a,b)=>{const d=a.codePointAt(0),e=b.codePointAt(0);return j((a)=>{if(!a.codePointAt)return!1;const b=a.codePointAt(0);return b>=d&&b<=e})},A=z('0','9'),B=z('A','Z'),C=z('a','z'),D=k(B,C),E=j((a)=>/\s/.test(a)),F=(a)=>[].concat(...a),G=(a)=>(b)=>({type:a,value:b}),H=(a)=>a.join(''),I=o(E),J=l(y(';'),m(v(y('\n'))).map(H)),K=l(y('0x'),o(k(A,z('A','F'),z('a','f'))).map(H)).map(H),L=o(A).map(H),M=l(p(y('-')),L,p(l(y('.'),L)).map(F)).map(F).map(H),N=o(v(E,((a)=>k(...Array.from(a).map(x)))('.:#,;@[]{}()]"'))).map(H),O=l(y('#'),N),P=y('"'),Q=y('\\"').map(()=>'"'),R=v(P),S=m(k(Q,R)).map(H),T=l(P,S,P),U=k(y('::').map(G('FieldOp')),y(':=').map(G('Assignment')),y(':').map(G('Colon')),y('[').map(G('LBrk')),y(']').map(G('RBrk')),y('{').map(G('LCurly')),y('}').map(G('RCurly')),y('(').map(G('LParen')),y(')').map(G('RParen')),y('@').map(G('At')),y('.').map(G('Dot')),I.map(G('Whitespace')),J.map(G('Comment')),K.map(G('HexNumber')),M.map(G('DecNumber')),O.map(G('TaggedString')),T.map(G('QuotedString')),N.map(G('Ident'))),V=m(U),W=(a)=>V.parseAll(Array.from(a)),X=(a)=>Array.isArray(a)?F(a).join(''):a,Y=(a)=>W(a).map(({type:a,value:b})=>`<span class="syntax-${a}">${X(b)}</span>`).join('');window.addEventListener('DOMContentLoaded',()=>{const b=Array.from(document.querySelectorAll('[data-critter-lang]'));b.forEach((b)=>{const c=Y(a(b.textContent));b.innerHTML=c})})})();